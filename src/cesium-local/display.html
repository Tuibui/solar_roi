<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>
  <style>
    body{margin:0;background:#111}
    model-viewer{width:100vw;height:100vh}
    .toolbar{
      position:fixed;top:20px;left:20px;z-index:10;
      display:flex;flex-direction:column;gap:8px;
    }
    button{
      background:rgba(0,0,0,0.7);
      color:white;border:none;padding:8px 14px;
      cursor:pointer;border-radius:4px;
    }
  </style>
</head>
<body>
<div class="toolbar">
  <button onclick="back()">‚Üê Back</button>
  <button id="fixBtn" onclick="toggleFix()">üîí Fix</button>
</div>
<model-viewer id="viewer" camera-controls></model-viewer>
<script>
const viewer=document.getElementById("viewer");
const btn=document.getElementById("fixBtn");
let fixed=false;
const p=new URLSearchParams(location.search);
viewer.src="/backend/static/"+(p.get("file")||"roof_model.glb")+"?t="+Date.now();
function back(){
  location.href="/index.html?return=true";
}
function toggleFix(){
  fixed=!fixed;
  if(fixed){
    viewer.removeAttribute("camera-controls");
    btn.textContent="üîì Unfix";
  }else{
    viewer.setAttribute("camera-controls","");
    btn.textContent="üîí Fix";
  }
}
</script>
</body>
</html>
